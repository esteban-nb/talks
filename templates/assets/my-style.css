/* CORE VARIABLES */
:root {
  --bg: #ffffff; --text: #1a1a1a; --title: #EE7F2D; --dim-text: #666;
  --divider: #e5e5e5; --link: #0072B2; --link-hover: #004f8a;
  --code-bg: #f6f8fa; --code-text: #24292e;
  --core-red: #D55E00; --core-orange: #EE7F2D; --core-yellow: #F0E442;
  --core-blue: #0072B2; --core-green: #009E73; --core-slate: #4B5E66;
  --space-xs: 0.4em; --space-sm: 0.8em; --space-md: 1.2em; --space-lg: 2em;
  --slide-gutter: 0.8em; --font-main: -apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  --font-code: ui-monospace,SFMono-Regular,Menlo,monospace; --font-size-base: 22px;
}

/* GLOBAL */
* { box-sizing: border-box; }
body { margin: 0; font-family: var(--font-main); }

/* SLIDE SYSTEM - ALL NESTED LEVELS */
.reveal .slides, .reveal .slides > section, .reveal .slides > section > section {
  display: flex !important; flex-direction: column !important; align-items: flex-start !important;
  width: 100%; height: 100vh; padding: var(--slide-gutter); margin: 0 !important; top: 0 !important;
}

/* LEAF SLIDES ONLY */
.reveal .slides > section:not(:has(section)), .reveal .slides > section > section:not(:has(section)) {
  padding: var(--slide-gutter);
}
.reveal .slides section > :first-child { margin-top: 0; }
.reveal .slides section > * { margin-left: 0; }

/* TYPOGRAPHY */
.reveal h1 { font-size: 2.5em; margin: var(--space-lg) 0 var(--space-md) 0; }
.reveal h2 { font-size: 1.6em; margin: var(--space-md) 0 var(--space-sm) 0; }
.reveal h3 { font-size: 1.3em; margin: var(--space-sm) 0; }
.reveal h1,h2,h3,h4,h5,h6 { font-weight: 600; line-height: 1.2; color: var(--title); text-align: left; }
.reveal p { margin: var(--space-sm) 0; text-align: left; line-height: 1.3; }

/* LISTS */
.reveal ul, .reveal ol { margin: var(--space-sm) 0 var(--space-sm) var(--space-md); text-align: left; }
.reveal ul { list-style: disc; } .reveal ol { list-style: decimal; }
.reveal ul ul { list-style: square; } .reveal ul ul ul { list-style: circle; }
.reveal ul > li::marker, .reveal ol > li::marker { color: var(--title); }

/* CODE */
.reveal pre, section[data-markdown] pre {
  display: block !important; width: fit-content; max-width: 90%; margin: var(--space-sm) auto;
  padding: var(--space-sm); font-family: var(--font-code); font-size: 0.8em; line-height: 1.25;
  background: var(--code-bg) !important; border-radius: 6px; border: 1px solid rgba(0,0,0,0.04);
  overflow: auto; max-height: 60vh; white-space: pre-wrap;
}
.reveal pre code, section[data-markdown] pre code { background: none !important; padding: 0 !important; }

/* MARKDOWN */
section[data-markdown] { text-align: left; }
section[data-markdown] :first-child { margin-top: 0; }
section[data-markdown] .r:last-child pre { margin: var(--space-sm) auto !important; max-width: 90% !important; }
section[data-markdown] .fragment { opacity: 0.5; }
section[data-markdown] .fragment.current-fragment { opacity: 1; }

/* IMAGES & MATH */
.reveal img, section[data-markdown] img {
  display: block; margin: var(--space-md) auto; max-width: 90%; max-height: 90%; object-fit: contain;
}
section[data-markdown] figcaption { margin-top: var(--space-xs); text-align: center; font-size: 0.7em; color: var(--dim-text); }
section[data-markdown] [class*="math"] { font-size: 1.1em; text-align: center; margin: var(--space-md) 0; }

/* TABLES */
.reveal table, section[data-markdown] table {
  margin: var(--space-md) auto; border-collapse: collapse; max-width: 90%;
}
.reveal th, .reveal td { padding: var(--space-xs) var(--space-sm); border-bottom: 1px solid var(--divider); text-align: left; }
.reveal table tbody tr:last-child th, .reveal table tbody tr:last-child td { border-bottom: none; }

/* LINKS */
.reveal a { color: var(--link); text-decoration: none; transition: color 0.15s; }
.reveal a:hover { color: var(--link-hover); }
.reveal ::selection { background: var(--link); color: #fff; }
