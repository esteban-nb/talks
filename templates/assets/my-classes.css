/* -------------------------------------------------------
 * SEAMLESS BLOCK
 * ----------------------------------------------------- */

.seamless-block {
    display: contents !important;
    
    /* 
       Note: Properties like background, border, margin, and padding 
       do NOT apply to display: contents.
    */
}

.seamless-block > * {
    width: 100% !important;
    max-width: var(--content-max-width) !important;
    margin-left: 0 !important;
    box-sizing: border-box !important;
}

.seamless-block img,
.seamless-block video {
    max-width: 100% !important;
    max-height: 90vh !important;
    height: auto !important;
    width: auto !important;
    object-fit: contain;
    display: block;
}

.seamless-block > *:first-child {
    margin-top: 0 !important;
}

.seamless-block > *:last-child {
    margin-bottom: 0 !important;
}


/* -------------------------------------------------------
 * GRID DISPLAY
 * ----------------------------------------------------- */

.grid {
  display: grid;
  grid-template-columns: var(--cols, 1fr);
  column-gap: var(--gap-cols, var(--space-lg));
  row-gap: var(--gap-rows, var(--space-md));
  text-align: left;
  align-items: start;
  width: 100%;
}


/* -------------------------------------------------------
 * HIGHLIGHT FRAGMENT
 * ----------------------------------------------------- */

.fragment.highlight {
  opacity: 1;
  visibility: inherit;
}

.fragment.highlight.visible {
  color: var(--highlight-color, --base-highlight-color);
}


/* =======================================================
 * REACTIVATE FRAGMENT
 * ======================================================= */

.fragment.activate {
  opacity: 0.5 !important;
  transition: opacity 0.5s ease;
}

.fragment.activate.current-fragment {
  opacity: 1 !important;
}


/* -------------------------------------------------------
 * CUSTOM BLOCK BASE
 * ----------------------------------------------------- */

.block {
  margin: var(--space-md) auto;
  border-style: solid;
  border-width: .5px .5px .5px var(--block-border-width);
    /* top, right, bottom, left */
  border-color: var(--divider) var(--divider) var(--divider) var(--icon-color);
  border-radius: var(--block-radius);
  overflow: hidden;
  text-align: left;
  background: rgba(0, 0, 0, var(--block-bg-opacity));
}

.block-title {
  display: flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm);
  font-weight: 600;
  color: var(--text);
  background: var(--title-color);
}

.block-body {
  padding: var(--space-sm) var(--space-md);
}

/* Shared icon rule */
.block-title::before {
  content: "";
  display: inline-block;
  width: 1.2em;
  height: 1.2em;
  flex-shrink: 0;

  /* Title background under the icon */
  background-color: var(--title-color);

  /* Mask setup */
  -webkit-mask-image: var(--icon-src);
  mask-image: var(--icon-src);
  -webkit-mask-size: contain;
  mask-size: contain;
  -webkit-mask-repeat: no-repeat;
  mask-repeat: no-repeat;
  -webkit-mask-position: center;
  mask-position: center;

  /* Fill shape with icon color */
  background: var(--icon-color);
}


/* -------------------------------------------------------
 * THEMATIC BLOCKS
 * ----------------------------------------------------- */

/* DON'T (Red) */
.block-donot {
  --icon-color: var(--core-red);
  --title-color: color-mix(in srgb, var(--core-red) 15%, transparent);
  --icon-src: url("icons/do-not.svg");
}

/* ALERT (Yellow) */
.block-alert {
  --icon-color: var(--core-yellow);
  --title-color: color-mix(in srgb, var(--core-yellow) 15%, transparent);
  --icon-src: url("icons/warning.svg");
}

/* ZOOM (Purple) */
.block-zoom {
  --icon-color: var(--core-purple);
  --title-color: color-mix(in srgb, var(--core-purple) 15%, transparent);
  --icon-src: url("icons/magnifying-glass.svg");
}

/* INFO (Blue) */
.block-info {
  --icon-color: var(--core-blue);
  --title-color: color-mix(in srgb, var(--core-blue) 15%, transparent);
  --icon-src: url("icons/info.svg");
}

/* NOTE (Green) */
.block-note {
  --icon-color: var(--core-green);
  --title-color: color-mix(in srgb, var(--core-green) 15%, transparent);
  --icon-src: url("icons/clipboard.svg");
}

/* PIN (Slate) */
.block-pin {
  --icon-color: var(--core-slate);
  --title-color: color-mix(in srgb, var(--core-slate) 15%, transparent);
  --icon-src: url("icons/pin.svg");
}


/* -------------------------------------------------------
 * MODE TOGGLE
 * ----------------------------------------------------- */

#mode-toggle-container {
  position: fixed;
  top: 25px;
  right: 25px;
  z-index: 1000;
  cursor: pointer;
  color: var(--title);
}

/* Icon color update */
body[data-theme="light"] #theme-icon {
  color: var(--core-orange);
}
body[data-theme="mono"] #theme-icon {
  color: #000000;
} 
body[data-theme="dark"] #theme-icon {
  color: #FFFFFF;
}

/* Animation */
.clicked .frame-1 { animation: slide-1 0.5s ease-in-out; }
.clicked .frame-2 { animation: slide-2 0.5s ease-in-out 0.05s; }
.clicked .frame-3 { animation: slide-3 0.5s ease-in-out 0.1s; }

@keyframes slide-1 {
  0% { transform: translateX(0); }
  50% { transform: translateX(-2px); }
  100% { transform: translateX(0); }
}

@keyframes slide-2 {
  0% { transform: translateX(0); }
  50% { transform: translateX(2px); }
  100% { transform: translateX(0); }
}

@keyframes slide-3 {
  0% { transform: translateX(0); }
  50% { transform: translateX(4px); }
  100% { transform: translateX(0); }
}
